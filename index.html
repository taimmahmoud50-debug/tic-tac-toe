<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âŒâ­• XO - Taim Games</title>
</head>
<body style="background: #1a1a1a; color: white; text-align: center; font-family: Arial; padding: 10px; direction: rtl;">
    <div style="max-width: 400px; margin: 0 auto;">
        <h1 style="color: #ffd700;">âŒâ­• XO - Taim Games</h1>
        <p>Ø§Ù„Ø¹Ø¨ Ø¶Ø¯ Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø°ÙƒÙŠ ÙÙŠ Ù„Ø¹Ø¨Ø© XO!</p>

        <div style="margin: 15px 0;">
            <button onclick="setBotLevel('easy')" style="background: #27ae60; color: white; border: none; padding: 10px; margin: 5px; border-radius: 10px;">ğŸŸ¢ Ø¨ÙˆØª Ø³Ù‡Ù„</button>
            <button onclick="setBotLevel('medium')" style="background: #f39c12; color: white; border: none; padding: 10px; margin: 5px; border-radius: 10px;">ğŸŸ¡ Ø¨ÙˆØª Ù…ØªÙˆØ³Ø·</button>
            <button onclick="setBotLevel('hard')" style="background: #e74c3c; color: white; border: none; padding: 10px; margin: 5px; border-radius: 10px;">ğŸ”´ Ø¨ÙˆØª ØµØ¹Ø¨</button>
        </div>

        <div style="display: flex; justify-content: space-around; margin: 20px 0;">
            <div style="background: #2c3e50; padding: 10px; border-radius: 10px;">ğŸ¯ Ø§Ù„Ù„Ø§Ø¹Ø¨: <span id="currentPlayer">âŒ</span></div>
            <div style="background: #2c3e50; padding: 10px; border-radius: 10px;">ğŸ”„ Ø§Ù„Ø¯ÙˆØ±: <span id="turnNumber">1</span></div>
            <div style="background: #2c3e50; padding: 10px; border-radius: 10px;">ğŸ¤– Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="botLevel">Ø³Ù‡Ù„</span></div>
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù„Ø¹Ø¨ -->
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin: 20px auto; max-width: 300px;">
            <div id="cell0" style="background: #34495e; height: 80px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;" onclick="makeMove(0)"></div>
            <div id="cell1" style="background: #34495e; height: 80px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;" onclick="makeMove(1)"></div>
            <div id="cell2" style="background: #34495e; height: 80px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;" onclick="makeMove(2)"></div>
            <div id="cell3" style="background: #34495e; height: 80px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;" onclick="makeMove(3)"></div>
            <div id="cell4" style="background: #34495e; height: 80px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;" onclick="makeMove(4)"></div>
            <div id="cell5" style="background: #34495e; height: 80px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;" onclick="makeMove(5)"></div>
            <div id="cell6" style="background: #34495e; height: 80px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;" onclick="makeMove(6)"></div>
            <div id="cell7" style="background: #34495e; height: 80px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;" onclick="makeMove(7)"></div>
            <div id="cell8" style="background: #34495e; height: 80px; display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer;" onclick="makeMove(8)"></div>
        </div>

        <div id="gameStatus" style="margin: 15px 0; padding: 10px; border-radius: 10px; background: #2c3e50;">
            Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ âŒ
        </div>

        <div style="margin: 20px 0;">
            <button onclick="restartGame()" style="background: #3498db; color: white; border: none; padding: 12px 20px; margin: 5px; border-radius: 10px;">ğŸ”„ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
            <button onclick="switchToPlayer()" style="background: #9b59b6; color: white; border: none; padding: 12px 20px; margin: 5px; border-radius: 10px;">ğŸ‘¥ Ø¶Ø¯ ØµØ¯ÙŠÙ‚</button>
        </div>

        <div style="color: #888; margin-top: 20px;">
            <p>Developed by Taim ğŸš€ | Â© 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
        </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ÙÙ„Ø§ÙÙ„ -->
    <div id="falafelScreen" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center;">
        <div style="background: #8B4513; color: white; padding: 30px; border-radius: 15px; text-align: center; border: 3px solid #ffd700;">
            <h1 style="font-size: 50px;">ğŸ¥™</h1>
            <h2 style="color: #ffd700;" id="winTitle">Ù…Ø¨Ø±ÙˆÙƒ! ÙØ²Øª Ø¨Ø³Ù†Ø¯ÙˆÙŠØ´Ø© ÙÙ„Ø§ÙÙ„! ğŸ‰</h2>
            <p id="winnerText">Ø§Ù„Ù„Ø§Ø¹Ø¨ âŒ ÙØ§Ø²!</p>
            <p style="color: #ffd700; font-size: 20px;" id="movesCount">Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙƒØ§Øª: 5</p>
            <p id="botLevelText" style="font-size: 14px; margin: 10px 0;"></p>
            
            <div style="margin-top: 20px;">
                <button onclick="restartFalafelGame()" style="background: #27ae60; color: white; border: none; padding: 12px 20px; margin: 5px; border-radius: 10px;">ğŸ® Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                <button onclick="closeFalafel()" style="background: #3498db; color: white; border: none; padding: 12px 20px; margin: 5px; border-radius: 10px;">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>
    </div>

    <script>
        let gameState = {
            board: ['', '', '', '', '', '', '', '', ''],
            currentPlayer: 'âŒ',
            gameOver: false,
            moves: 0,
            vsBot: true,
            botLevel: 'easy', // 'easy', 'medium', 'hard'
            scores: {
                'âŒ': 0,
                'â­•': 0
            }
        };

        const winningCombinations = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // ØµÙÙˆÙ
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // Ø£Ø¹Ù…Ø¯Ø©
            [0, 4, 8], [2, 4, 6]             // Ù‚Ø·Ø±ÙŠØ©
        ];

        // ØªØ¹ÙŠÙŠÙ† Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨ÙˆØª
        function setBotLevel(level) {
            gameState.botLevel = level;
            gameState.vsBot = true;
            document.getElementById('botLevel').textContent = 
                level === 'easy' ? 'Ø³Ù‡Ù„' : level === 'medium' ? 'Ù…ØªÙˆØ³Ø·' : 'ØµØ¹Ø¨';
            initGame();
        }

        // Ø§Ù„Ù„Ø¹Ø¨ Ø¶Ø¯ ØµØ¯ÙŠÙ‚
        function switchToPlayer() {
            gameState.vsBot = false;
            document.getElementById('botLevel').textContent = 'Ù„Ø§Ø¹Ø¨ÙŠÙ†';
            initGame();
        }

        function initGame() {
            gameState.board = ['', '', '', '', '', '', '', '', ''];
            gameState.currentPlayer = 'âŒ';
            gameState.gameOver = false;
            gameState.moves = 0;
            
            updateBoard();
            updateDisplay();
        }

        function makeMove(cellIndex) {
            if (gameState.gameOver || gameState.board[cellIndex] !== '') return;

            gameState.board[cellIndex] = gameState.currentPlayer;
            gameState.moves++;
            
            updateBoard();
            
            if (checkWin()) {
                gameState.scores[gameState.currentPlayer]++;
                showWinScreen(gameState.currentPlayer);
                return;
            }
            
            if (gameState.moves === 9) {
                showWinScreen('ØªØ¹Ø§Ø¯Ù„');
                return;
            }
            
            gameState.currentPlayer = gameState.currentPlayer === 'âŒ' ? 'â­•' : 'âŒ';
            updateDisplay();
            
            // Ø­Ø±ÙƒØ© Ø§Ù„Ø¨ÙˆØª
            if (gameState.vsBot && gameState.currentPlayer === 'â­•' && !gameState.gameOver) {
                setTimeout(() => makeBotMove(), 600);
            }
        }

        // Ø­Ø±ÙƒØ© Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø°ÙƒÙŠ
        function makeBotMove() {
            if (gameState.gameOver) return;
            
            let move;
            
            switch(gameState.botLevel) {
                case 'easy':
                    move = getEasyMove();
                    break;
                case 'medium':
                    move = getMediumMove();
                    break;
                case 'hard':
                    move = getHardMove();
                    break;
            }
            
            if (move !== -1) {
                makeMove(move);
            }
        }

        // Ø¨ÙˆØª Ø³Ù‡Ù„ (Ø¹Ø´ÙˆØ§Ø¦ÙŠ)
        function getEasyMove() {
            let availableCells = [];
            for (let i = 0; i < 9; i++) {
                if (gameState.board[i] === '') {
                    availableCells.push(i);
                }
            }
            return availableCells.length > 0 ? availableCells[Math.floor(Math.random() * availableCells.length)] : -1;
        }

        // Ø¨ÙˆØª Ù…ØªÙˆØ³Ø· (ÙŠØ¯Ø§ÙØ¹ ÙˆÙŠÙ‡Ø¬Ù…)
        function getMediumMove() {
            // 1. Ø­Ø§ÙˆÙ„ ØªØ±Ø¨Ø­ Ø¥Ø°Ø§ Ø£Ù‚Ø¯Ø±
            let winMove = findWinningMove('â­•');
            if (winMove !== -1) return winMove;
            
            // 2. Ø§Ù…Ù†Ø¹ Ø§Ù„Ø®ØµÙ… Ù…Ù† Ø§Ù„Ø±Ø¨Ø­
            let blockMove = findWinningMove('âŒ');
            if (blockMove !== -1) return blockMove;
            
            // 3. Ù…Ø±ÙƒØ² Ø£Ùˆ Ø²ÙˆØ§ÙŠØ§
            const centerAndCorners = [4, 0, 2, 6, 8];
            for (let pos of centerAndCorners) {
                if (gameState.board[pos] === '') return pos;
            }
            
            // 4. Ø£ÙŠ Ø­Ø±ÙƒØ© Ù…ØªØ§Ø­Ø©
            return getEasyMove();
        }

        // Ø¨ÙˆØª ØµØ¹Ø¨ (Ù…Ø³ØªØ­ÙŠÙ„ ØªØ®Ø³Ø±)
        function getHardMove() {
            // 1. Ø­Ø§ÙˆÙ„ ØªØ±Ø¨Ø­
            let winMove = findWinningMove('â­•');
            if (winMove !== -1) return winMove;
            
            // 2. Ø§Ù…Ù†Ø¹ Ø§Ù„Ø®ØµÙ…
            let blockMove = findWinningMove('âŒ');
            if (blockMove !== -1) return blockMove;
            
            // 3. Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©
            if (gameState.moves === 1 && gameState.board[4] === '') return 4; // Ù…Ø±ÙƒØ²
            
            // 4. Ø²ÙˆØ§ÙŠØ§ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©
            const corners = [0, 2, 6, 8];
            const availableCorners = corners.filter(corner => gameState.board[corner] === '');
            if (availableCorners.length > 0) {
                return availableCorners[Math.floor(Math.random() * availableCorners.length)];
            }
            
            // 5. Ø£ÙŠ Ø­Ø±ÙƒØ©
            return getEasyMove();
        }

        // Ø¥ÙŠØ¬Ø§Ø¯ Ø­Ø±ÙƒØ© Ø±Ø§Ø¨Ø­Ø©
        function findWinningMove(player) {
            for (let combination of winningCombinations) {
                const [a, b, c] = combination;
                const cells = [gameState.board[a], gameState.board[b], gameState.board[c]];
                
                // Ø¥Ø°Ø§ ÙÙŠ Ø®Ù„ÙŠØªÙŠÙ† Ù„Ù„Ø§Ø¹Ø¨ ÙˆØ®Ù„ÙŠØ© ÙØ§Ø±ØºØ©
                if (cells.filter(cell => cell === player).length === 2) {
                    if (gameState.board[a] === '' && cells[1] === player && cells[2] === player) return a;
                    if (gameState.board[b] === '' && cells[0] === player && cells[2] === player) return b;
                    if (gameState.board[c] === '' && cells[0] === player && cells[1] === player) return c;
                }
            }
            return -1;
        }

        function checkWin() {
            for (let combination of winningCombinations) {
                const [a, b, c] = combination;
                if (gameState.board[a] !== '' && 
                    gameState.board[a] === gameState.board[b] && 
                    gameState.board[a] === gameState.board[c]) {
                    
                    document.getElementById(`cell${a}`).style.background = '#27ae60';
                    document.getElementById(`cell${b}`).style.background = '#27ae60';
                    document.getElementById(`cell${c}`).style.background = '#27ae60';
                    
                    return true;
                }
            }
            return false;
        }

        function updateBoard() {
            for (let i = 0; i < 9; i++) {
                const cell = document.getElementById(`cell${i}`);
                cell.textContent = gameState.board[i];
                if (!gameState.gameOver) {
                    cell.style.background = '#34495e';
                }
            }
        }

        function updateDisplay() {
            document.getElementById('currentPlayer').textContent = gameState.currentPlayer;
            document.getElementById('turnNumber').textContent = Math.ceil((gameState.moves + 1) / 2);
            
            let statusText = `Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ ${gameState.currentPlayer}`;
            if (gameState.vsBot && gameState.currentPlayer === 'â­•') {
                statusText = `ğŸ¤– Ø§Ù„Ø¨ÙˆØª (${gameState.botLevel === 'easy' ? 'Ø³Ù‡Ù„' : gameState.botLevel === 'medium' ? 'Ù…ØªÙˆØ³Ø·' : 'ØµØ¹Ø¨'}) ÙŠÙÙƒØ±...`;
            }
            document.getElementById('gameStatus').textContent = statusText;
        }

        function restartGame() {
            initGame();
        }

        function showWinScreen(winner) {
            gameState.gameOver = true;
            
            const winTitle = document.getElementById('winTitle');
            const winnerText = document.getElementById('winnerText');
            const movesCount = document.getElementById('movesCount');
            const botLevelText = document.getElementById('botLevelText');
            
            movesCount.textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙƒØ§Øª: ${gameState.moves}`;
            
            if (gameState.vsBot) {
                const levelName = gameState.botLevel === 'easy' ? 'Ø³Ù‡Ù„' : gameState.botLevel === 'medium' ? 'Ù…ØªÙˆØ³Ø·' : 'ØµØ¹Ø¨';
                botLevelText.textContent = `Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨ÙˆØª: ${levelName}`;
            } else {
                botLevelText.textContent = '';
            }
            
            if (winner === 'ØªØ¹Ø§Ø¯Ù„') {
                winTitle.textContent = 'ØªØ¹Ø§Ø¯Ù„! ğŸ˜';
                winnerText.textContent = 'Ù„Ø§ ÙØ§Ø¦Ø² ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬ÙˆÙ„Ø©';
            } else {
                winTitle.textContent = 'Ù…Ø¨Ø±ÙˆÙƒ! ÙØ²Øª Ø¨Ø³Ù†Ø¯ÙˆÙŠØ´Ø© ÙÙ„Ø§ÙÙ„! ğŸ‰';
                if (gameState.vsBot && winner === 'â­•') {
                    winnerText.textContent = 'ğŸ¤– Ø§Ù„Ø¨ÙˆØª ÙØ§Ø²! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
                } else {
                    winnerText.textContent = `Ø§Ù„Ù„Ø§Ø¹Ø¨ ${winner} ÙØ§Ø²!`;
                }
            }
            
            document.getElementById('falafelScreen').style.display = 'flex';
        }

        function restartFalafelGame() {
            document.getElementById('falafelScreen').style.display = 'none';
            initGame();
        }

        function closeFalafel() {
            document.getElementById('falafelScreen').style.display = 'none';
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        window.onload = initGame;
    </script>
</body>
</html>
